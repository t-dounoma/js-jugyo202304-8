<!DOCTYPE html>
<html lang="en">

<head>
  <title>NestJS</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
</head>

<body class="container mt-2">
  <h1 class="display-6 text-primary">
    <strong>NestJS</strong>
  </h1>
  <div class="my-3" id="result">
    <p id="msg">※データを送信してください</p>
  </div>
  <div class="mb-3">
    <label for="name" class="form-label">Name</label>
    <input type="text" class="form-control" id="name" name="name">
  </div>
  <div class="mb-3">
    <label for="mail" class="form-label">Mail</label>
    <input type="text" class="form-control" id="mail" name="mail">
  </div>
  <div class="mb-3">
    <label for="age" class="form-label">Age</label>
    <input type="text" class="form-control" id="age" name="age" value="0">
  </div>
  <button class="btn btn-secondary" onclick="doAction();">送信</button>
  <div class="my-3">&nbsp;</div>
  <div class="fixed-bottom bg-secondary p-1" style="width:100%">
    <p class="text-center text-white m-0">
      &copy;MASATO ISHIKI
    </p>
  </div>
  <script>
    function doAction() {
      const name = document.querySelector('#name').value
      const mail = document.querySelector('#mail').value
      const age = document.querySelector('#age').value
      const data = { name: name, mail: mail, age: age }
      const opt = {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
      }
      fetch('/hello/post', opt)
        .then(response => response.json())
        .then(data => setData(data))
    }

    function setData(res) {
      document.querySelector('#msg').textContent = '結果：' + res
    }
  </script>
</body>

</html>