<!DOCTYPE html>
<html lang="en">

<head>
  <title>NestJS</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
</head>

<body class="container mt-2">
  <h1 class="display-6 text-primary">
    <strong>NestJS</strong>
  </h1>
  <div class="my-3" id="result">
    <p id="msg">※IDを送信してください</p>
  </div>
  <div class="mb-3">
    <label for="id" class="form-label">ID</label>
    <input type="number" value="0" class="form-control" id="id">
  </div>
  <button class="btn btn-secondary" onclick="doAction();">送信</button>
  <div class="my-3">&nbsp;</div>
  <div class="fixed-bottom bg-secondary p-1" style="width:100%">
    <p class="text-center text-white m-0">
      &copy;MASATO ISHIKI
    </p>
  </div>
  <script>
    function doAction() {
      const n = document.querySelector('#id').value
      fetch('/hello/' + n)
        .then(response => response.json())
        .then(data => setData(data))
    }
    function setData(obj) {
      const table =
        `<table class="table">
        <thead>
          <tr><th>ID</th><th>Name</th><th>Mail</th>
          <th>Age</th><th>Created</th></tr>
        </thead>
        <tbody>
          <tr>
            <td>${obj.id}</td>
            <td>${obj.data.name}</td>
            <td>${obj.data.mail}</td>
            <td>${obj.data.age}</td>
            <td>${obj.created}</td>
          </tr>
        </tbody>
      </table>`
      document.querySelector('#result').innerHTML = table
    }
  </script>
</body>

</html>